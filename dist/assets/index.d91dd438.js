import{R as e,L as t,r as l,u as a,a as n,B as r,S as o,b as c,c as s}from"./vendor.b894afdc.js";const m=()=>e.createElement("nav",{className:"navbar"},e.createElement("h1",null,"Dojo Blog"),e.createElement("div",{className:"links"},e.createElement(t,{to:"/"},"Home"),e.createElement(t,{to:"/create"},"New Blog"))),u=({blogs:l,title:a})=>e.createElement("div",{className:"blog-list"},e.createElement("h2",null,a," "),l.map((l=>e.createElement("div",{className:"blog-preview",key:l.id},e.createElement(t,{to:`/blogs/${l.id}`},e.createElement("h2",null,l.title),e.createElement("p",null,"Written by ",l.author)))))),i=e=>{const[t,a]=l.exports.useState(null),[n,r]=l.exports.useState(!0),[o,c]=l.exports.useState(null);return l.exports.useEffect((()=>{const t=new AbortController;return setTimeout((()=>{fetch(e,{signal:t.signal}).then((e=>{if(!e.ok)throw Error("could not fetch the data for that resource");return e.json()})).then((e=>{a(e),r(!1),c(null)})).catch((e=>{"AbortError"===e.name?console.log("fetch aborted"):(r(!1),c(e.message))}))}),1e3),()=>t.abort()}),[e]),{data:t,isPending:n,error:o}},E=()=>{const{data:t,isPending:l,error:a}=i("http://localhost:8000/blogs");return e.createElement("div",{className:"home"},a&&e.createElement("div",{className:"error"},a),l&&e.createElement("div",null,"loading..."),t&&e.createElement(u,{blogs:t,title:"All Blogs!"}))},d=()=>{const[t,n]=l.exports.useState(""),[r,o]=l.exports.useState(""),[c,s]=l.exports.useState("mario"),[m,u]=l.exports.useState(!1),i=a();return e.createElement("div",{className:"create"},e.createElement("h2",null,"Add a New Blog"),e.createElement("form",{onSubmit:e=>{e.preventDefault();const l={title:t,body:r,author:c};u(!0),fetch("http://localhost:8000/blogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((()=>{console.log("new blog added"),u(!1),i.push("/")}))}},e.createElement("label",null,"Blog title:"),e.createElement("input",{type:"text",required:!0,value:t,onChange:e=>n(e.target.value)}),e.createElement("label",null,"Blog body:"),e.createElement("textarea",{required:!0,value:r,onChange:e=>o(e.target.value)}),e.createElement("label",null,"Blog author:"),e.createElement("select",{value:c,onChange:e=>s(e.target.value)},e.createElement("option",{value:"mario"},"mario"),e.createElement("option",{value:"crystal"},"crystal")),!m&&e.createElement("button",null,"Add blog"),m&&e.createElement("button",{disabled:!0},"Adding blog...")))},h=()=>{const{id:t}=n(),{data:l,isPending:r,error:o}=i("http://localhost:8000/blogs/"+t),c=a();return e.createElement("div",{className:"blog-details"},r&&e.createElement("div",null,"loading..."),o&&e.createElement("div",{className:"error"},o),l&&e.createElement("article",null,e.createElement("h2",null,l.title),e.createElement("p",null,"Written by ",l.author),e.createElement("p",null,l.body," "),e.createElement("button",{onClick:()=>{fetch("http://localhost:8000/blogs/"+l.id,{method:"DELETE"}).then((()=>{c.push("/")}))}},"delete")))},g=()=>e.createElement("div",{className:"not-found"},e.createElement("h2",null,"Sorry"),e.createElement("p",null,"That page cannot be found"),e.createElement(t,{to:"/"},"Back to the homepage"));function p(){return e.createElement(r,null,e.createElement("div",{className:"App"},e.createElement(m,null),e.createElement("div",{className:"content"},e.createElement(o,null,e.createElement(c,{exact:!0,path:"/"},e.createElement(E,null)),e.createElement(c,{path:"/create"},e.createElement(d,null)),e.createElement(c,{path:"/blogs/:id"},e.createElement(h,null)),e.createElement(c,{path:"*"},e.createElement(g,null))))))}s.render(e.createElement(e.StrictMode,null,e.createElement(p,null)),document.getElementById("root"));
